{"version":3,"file":"5.6b6f1bbae4620b3db536.hot-update.js","sources":["webpack:///pages/index.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport NewsList from \"../components/News/NewsList\";\nimport Navbar from \"../components/Layout/Navbar\";\nimport Input from \"../components/Form/Input\";\nimport CatagoriesBtns from \"../components/Form/CatagoriesBtns\";\nimport HeadlineSelect from \"../components/Form/HeadlineSelect\";\nimport BackBtn from \"../components/Layout/BackBtn\";\nimport SubmitBtn from \"../components/Form/SubmitBtn\";\nimport LoadingWheel from \"../components/News/LoadingWheel\";\nimport fetch from \"isomorphic-unfetch\";\nimport $ from \"jquery\";\n\nimport \"../scss/style.scss\";\nclass Index extends Component {\n  state = {\n    mode: \"catagories\",\n    query: \"\",\n    headlineTopic: \"\",\n    newsLoading: false,\n    news: [],\n    error: \"\"\n  };\n\n  componentDidMount() {\n    if (\"serviceWorker\" in navigator) {\n      navigator.serviceWorker\n        .register(\"/sw.js\")\n        .catch(err => console.error(\"Service worker registration failed\", err));\n    } else {\n      console.log(\"Service worker not supported\");\n    }\n  }\n\n  handleTextInputChange = e => {\n    this.setState({\n      query: e.target.value\n    });\n  };\n\n  handleTopicSelectChange = e => {\n    this.setState({\n      headlineTopic: e.target.value\n    });\n  };\n\n  onTopicSubmit = topic => {\n    const { mode } = this.state;\n    if (mode === \"topHeadlines\") {\n      this.setState({\n        newsLoading: true\n      });\n      fetch(\n        `https://newsapi.org/v2/top-headlines?country=us&category=${topic}&apiKey=5026a89ef4104655943e8a0c6697f480`\n      )\n        .then(res => res.json())\n        .then(data =>\n          this.setState({\n            news: data.articles\n          })\n        );\n      setTimeout(() => {\n        this.setState({\n          newsLoading: false\n        });\n      }, 1500);\n    } else {\n      if (topic !== \"\") {\n        this.setState({\n          newsLoading: true,\n          query: \"\"\n        });\n        fetch(\n          `https://newsapi.org/v2/everything?q=${topic}&apiKey=5026a89ef4104655943e8a0c6697f480`\n        )\n          .then(res => res.json())\n          .then(data => {\n            if (data.articles.length > 0) {\n              return this.setState({\n                error: \"\",\n                news: data.articles\n              });\n            } else {\n              this.setState({\n                error: \"We wheren't able to find any news with that search...\"\n              });\n            }\n          });\n        setTimeout(() => {\n          this.setState({\n            newsLoading: false\n          });\n        }, 1500);\n      } else {\n        this.setState({\n          error: \"Please enter a topic to search for\"\n        });\n      }\n    }\n  };\n\n  onChooseNewsClick = () => {\n    this.setState({\n      mode: \"chooseNews\"\n    });\n  };\n\n  onHeadlinesClick = () => {\n    this.setState({\n      mode: \"topHeadlines\"\n    });\n  };\n\n  onBackToCatagoriesClick = () => {\n    this.setState({\n      mode: \"catagories\",\n      query: \"\",\n      headlineTopic: \"\",\n      newsLoading: false,\n      news: [],\n      error: \"\"\n    });\n  };\n\n  render() {\n    const { query, mode, headlineTopic, news, newsLoading, error } = this.state;\n    let modeDisplay;\n    let newsRender;\n    if (mode === \"catagories\") {\n      modeDisplay = (\n        <CatagoriesBtns\n          onHeadlinesClick={this.onHeadlinesClick}\n          onChooseNewsClick={this.onChooseNewsClick}\n        />\n      );\n    } else if (mode === \"chooseNews\") {\n      modeDisplay = (\n        <Input\n          onChange={this.handleTextInputChange}\n          query={query}\n          onTopicSubmit={this.onTopicSubmit}\n        />\n      );\n    } else if (mode === \"topHeadlines\") {\n      modeDisplay = (\n        <HeadlineSelect onTopicSelect={this.handleTopicSelectChange} />\n      );\n    }\n\n    if (mode === \"chooseNews\" || mode === \"topHeadlines\") {\n      if (newsLoading) {\n        newsRender = <LoadingWheel />;\n      } else {\n        newsRender = <NewsList news={news} error={error} />;\n      }\n    }\n    return (\n      <div>\n        <Navbar onBrandClick={this.onBackToCatagoriesClick} />\n        <div style={{ height: \"150px\", marginTop: \"100px\" }} className=\"row\">\n          <div className=\"col-md-2\">\n            {mode === \"chooseNews\" || mode === \"topHeadlines\" ? (\n              <BackBtn onBackClick={this.onBackToCatagoriesClick} />\n            ) : (\n              \"\"\n            )}\n          </div>\n          {modeDisplay}\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-2\" />\n          {mode === \"chooseNews\" || mode === \"topHeadlines\" ? (\n            <SubmitBtn\n              query={mode === \"chooseNews\" ? query : headlineTopic}\n              onTopicSubmit={this.onTopicSubmit}\n            />\n          ) : (\n            \"\"\n          )}\n          <div className=\"col-md-2\" />\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-2\" />\n          {newsRender}\n          <div className=\"col-md-2\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Index;\n\n\n\n// WEBPACK FOOTER //\n// pages/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;;;;AAmBA;AACA;AACA;AADA;AAGA;;;;;AAEA;AACA;AACA;AADA;AAGA;;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AAGA;AAAA;AACA;AAEA;AADA;AADA;AAKA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;;;;;AAEA;AACA;AACA;AADA;AAGA;;;;;AAEA;AACA;AACA;AADA;AAGA;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;;;;;;AAlGA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;;;AA4FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA9KA;AACA;AAgLA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}